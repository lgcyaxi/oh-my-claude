# v2.1.x Changelog

## v2.1.1 - 2026-02-18

### Fixed

- **Agent Tool Access**: All agents (including MCP agents like hephaestus, oracle, navigator, etc.) now get full tool access (`Read, Glob, Grep, Bash, Edit, Write, Task, WebFetch, WebSearch`) in generated `.claude/agents/*.md` files. Previously MCP agents only got `Read, Glob, Grep, Bash, Edit, Write`, which prevented them from using Task, WebFetch, and WebSearch when spawned as subagents via the Task tool.

- **Doctor Stale Command List**: `oh-my-claude doctor --detail` now shows the correct set of slash commands and agents. Removed stale entries (`omc-oracle`, `omc-librarian`, `omc-reviewer`, `omc-scout`, `omc-explore`, `omc-hephaestus`), added new ones (`omc-opencode`, `omc-codex`, `omc-pref`, `omc-up`, `omc-down`, `omc-pend`, `omc-status-bridge`, `omc-mem-daily`). Agent list updated: replaced `frontend-ui-ux` with `ui-designer`, added `opencode` and `codex-cli`.

- **Menubar Build from npm**: `oh-my-claude menubar --build` now gives a clear error with clone instructions when the Tauri source is not available (npm package doesn't include it). Added `tauri.conf.json` existence check before attempting build.

- **Installer Stale File Cleanup**: `oh-my-claude install` now removes stale command files from previous versions (`omc-oracle`, `omc-librarian`, `omc-reviewer`, `omc-scout`, `omc-explore`, `omc-hephaestus`, `omc-navigator`) and stale agent files (`frontend-ui-ux.md`).

---

## v2.1.0 - 2026-02-18

### Added

- **Terminal Configuration CLI**: `oh-my-claude wezterm-config` and `oh-my-claude tmux-config` write optimized terminal configurations for AI coding sessions.
  - WezTerm: 50k scrollback, JetBrains Mono, Dracula theme, WebGpu, vi copy mode, quick select, regex search, pane splitting
  - tmux: 50k scrollback, mouse mode, 256-color, zero escape delay, vi copy mode, auto-detected clipboard per platform

- **WezTerm Zsh Auto-Detection**: Generated `.wezterm.lua` detects zsh in Git Bash installations (checks both `bin/` and `usr/bin/` paths). If found, launches via `bash -i -l -c zsh`. Priority: zsh > Git Bash > PowerShell.

- **Cross-Platform Clipboard**: `tmux-config` auto-detects: `pbcopy` (macOS), `clip.exe` (Windows/WSL), `xclip` (Linux), `xsel` (Linux fallback). Mouse drag sends directly to system clipboard.

- **WezTerm Split-Pane Bridge Layout**: `bridge up codex opencode` uses `wezterm cli split-pane` for split layout within the same WezTerm tab. First AI splits right (50%), subsequent AIs stack vertically.

- **CC-to-CC Bridge**: Spawn Claude Code instances as bridge workers (`bridge up cc`), each with its own proxy session. Auto-switch via `--switch`. Multi-instance support (`cc:2`, `cc:3`).

- **Event-Driven Bridge Notifications**: Signal files + hook scanning replaces repeated `poll_task`. `wait_for_tasks` MCP tool for blocking multi-task completion. Bridge auto-close, default pane-right layout.

### Fixed

- **WezTerm Config `--force`**: Fixed `--force` flag not overwriting when oh-my-claude config marker was already present.

- **WezTerm Config Lua Escape**: Fixed `invalid escape sequence near '[/\]'` Lua syntax error in generated Git Bash detection pattern.

- **Kimi Proxy Sanitization**: Fixed 400 errors when switching to Kimi — only `tool_reference` content type is stripped. Thinking blocks and config preserved.

- **npm Package Size**: Removed `apps/menubar/` (Tauri source/icons), `scripts/`, and stale dist chunks from npm package. Changed `prepare` → `prepack` so `bun build:all` only runs during publish, not on user `npm install`. Package reduced from 15.8 MB → 6.0 MB unpacked, 133 → 46 files.

### Changed

- **`files` in package.json**: Now explicitly lists only required dist artifacts (`dist/cli.js`, `dist/index.js`, `dist/*.wasm`, `dist/mcp/`, `dist/hooks/`, `dist/statusline/`, `dist/proxy/`), `bin/`, `src/commands/`, and `src/styles/*.md`.
